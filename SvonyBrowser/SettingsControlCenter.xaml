<Window x:Class="SvonyBrowser.SettingsControlCenter"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SvonyBrowser"
        Title="âš™ Settings Control Center - Borg Edition" 
        Height="700" Width="950"
        WindowStartupLocation="CenterOwner"
        Background="#1a1a2e"
        MinHeight="600" MinWidth="800">
    
    <Window.Resources>
        <!-- Dark Theme Colors -->
        <SolidColorBrush x:Key="PrimaryBg" Color="#1a1a2e"/>
        <SolidColorBrush x:Key="SecondaryBg" Color="#16213e"/>
        <SolidColorBrush x:Key="TertiaryBg" Color="#0f3460"/>
        <SolidColorBrush x:Key="AccentColor" Color="#e94560"/>
        <SolidColorBrush x:Key="AccentHover" Color="#ff6b6b"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#ffffff"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#a0a0a0"/>
        <SolidColorBrush x:Key="BorderColor" Color="#2a2a4a"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#4ade80"/>
        <SolidColorBrush x:Key="WarningColor" Color="#fbbf24"/>
        <SolidColorBrush x:Key="ErrorColor" Color="#f87171"/>
        
        <!-- Toggle Switch Style -->
        <Style x:Key="ToggleSwitchStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal">
                            <Grid Width="44" Height="24">
                                <Border x:Name="track" Background="#3a3a5a" CornerRadius="12" 
                                        BorderThickness="1" BorderBrush="#4a4a6a"/>
                                <Border x:Name="thumb" Width="20" Height="20" CornerRadius="10"
                                        Background="White" HorizontalAlignment="Left" Margin="2,0,0,0"/>
                            </Grid>
                            <ContentPresenter Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="track" Property="Background" Value="#e94560"/>
                                <Setter TargetName="thumb" Property="Margin" Value="22,0,0,0"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter TargetName="thumb" Property="Margin" Value="2,0,0,0"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="track" Property="BorderBrush" Value="#e94560"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#2a2a4a"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="#3a3a5a"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource AccentColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="#2a2a4a"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="#3a3a5a"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
        
        <!-- Modern Slider Style -->
        <Style x:Key="ModernSlider" TargetType="Slider">
            <Setter Property="Height" Value="24"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border Height="6" Background="#2a2a4a" CornerRadius="3" VerticalAlignment="Center"/>
                            <Border x:Name="PART_SelectionRange" Height="6" Background="{StaticResource AccentColor}" 
                                    CornerRadius="3" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                            <Track x:Name="PART_Track">
                                <Track.Thumb>
                                    <Thumb Width="18" Height="18">
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Ellipse Fill="{StaticResource AccentColor}" 
                                                         Stroke="White" StrokeThickness="2"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource AccentColor}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
        
        <!-- Setting Label Style -->
        <Style x:Key="SettingLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- Setting Description Style -->
        <Style x:Key="SettingDescription" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,2,0,0"/>
        </Style>
        
        <!-- Tab Item Style -->
        <Style x:Key="SettingsTabItem" TargetType="ListBoxItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="border" Padding="15,12" Cursor="Hand" Background="Transparent">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="icon" Text="{Binding Icon}" FontSize="16" 
                                           Foreground="{StaticResource TextSecondary}" Margin="0,0,10,0"/>
                                <TextBlock x:Name="text" Text="{Binding Name}" FontSize="13"
                                           Foreground="{StaticResource TextSecondary}"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource TertiaryBg}"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource AccentColor}"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="3,0,0,0"/>
                                <Setter TargetName="icon" Property="Foreground" Value="{StaticResource AccentColor}"/>
                                <Setter TargetName="text" Property="Foreground" Value="{StaticResource TextPrimary}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1f2940"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Action Button Style -->
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentHover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="#3a3a5a"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Left Navigation Panel -->
        <Border Grid.Column="0" Background="{StaticResource SecondaryBg}" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,0,1,0">
            <DockPanel>
                <!-- Header -->
                <StackPanel DockPanel.Dock="Top" Margin="15,20">
                    <TextBlock Text="âš™ Settings" FontSize="20" FontWeight="Bold" Foreground="{StaticResource TextPrimary}"/>
                    <TextBlock Text="Borg Edition v6.0" FontSize="11" Foreground="{StaticResource AccentColor}" Margin="0,5,0,0"/>
                </StackPanel>
                
                <!-- Search -->
                <Border DockPanel.Dock="Top" Margin="15,0,15,15">
                    <TextBox x:Name="SearchBox" Style="{StaticResource ModernTextBox}" 
                             Text="" Tag="ðŸ” Search settings..."/>
                </Border>
                
                <!-- Navigation List -->
                <ListBox x:Name="CategoryList" Background="Transparent" BorderThickness="0"
                         ItemContainerStyle="{StaticResource SettingsTabItem}"
                         SelectionChanged="CategoryList_SelectionChanged">
                    <ListBox.Items>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="âš¡" Name="General"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸŒ" Name="Browser"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ”Œ" Name="Proxy"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ¤–" Name="MCP Servers"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ§ " Name="LLM"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ”" Name="Fiddler"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ¤–" Name="Automation"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ“Š" Name="Traffic"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ’¬" Name="Chatbot"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ“Š" Name="Status Bar"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="ðŸ””" Name="Webhooks"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                        <ListBoxItem>
                            <ListBoxItem.DataContext>
                                <local:SettingsCategory Icon="âš™" Name="Advanced"/>
                            </ListBoxItem.DataContext>
                        </ListBoxItem>
                    </ListBox.Items>
                </ListBox>
            </DockPanel>
        </Border>
        
        <!-- Right Content Panel -->
        <DockPanel Grid.Column="1">
            <!-- Bottom Action Bar -->
            <Border DockPanel.Dock="Bottom" Background="{StaticResource SecondaryBg}" 
                    BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0" Padding="20,15">
                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button Content="ðŸ“¥ Import" Style="{StaticResource SecondaryButton}" Click="Import_Click" Margin="0,0,10,0"/>
                        <Button Content="ðŸ“¤ Export" Style="{StaticResource SecondaryButton}" Click="Export_Click" Margin="0,0,10,0"/>
                        <Button Content="ðŸ”„ Reset" Style="{StaticResource SecondaryButton}" Click="Reset_Click"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Cancel" Style="{StaticResource SecondaryButton}" Click="Cancel_Click" Margin="0,0,10,0"/>
                        <Button Content="âœ“ Save Changes" Style="{StaticResource ActionButton}" Click="Save_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Settings Content -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="25">
                <StackPanel x:Name="SettingsContent">
                    
                    <!-- General Settings Panel -->
                    <StackPanel x:Name="GeneralPanel" Visibility="Visible">
                        <TextBlock Text="âš¡ General Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Theme -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Theme" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Choose the application color theme" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="ThemeCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="Dark" IsSelected="True"/>
                                    <ComboBoxItem Content="Light"/>
                                    <ComboBoxItem Content="System"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Language -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Language" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Select the interface language" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="LanguageCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="English" IsSelected="True"/>
                                    <ComboBoxItem Content="Spanish"/>
                                    <ComboBoxItem Content="French"/>
                                    <ComboBoxItem Content="German"/>
                                    <ComboBoxItem Content="Chinese"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Start Minimized -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Start Minimized" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Launch the application minimized to system tray" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="StartMinimizedToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Start with Windows -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Start with Windows" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Automatically start when Windows boots" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="StartWithWindowsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Check for Updates -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Check for Updates" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Automatically check for new versions" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="CheckUpdatesToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Update Channel -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Update Channel" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Choose which updates to receive" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="UpdateChannelCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="Stable" IsSelected="True"/>
                                    <ComboBoxItem Content="Beta"/>
                                    <ComboBoxItem Content="Nightly"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Log Level -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Log Level" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Set the verbosity of application logs" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="LogLevelCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="Debug"/>
                                    <ComboBoxItem Content="Info" IsSelected="True"/>
                                    <ComboBoxItem Content="Warning"/>
                                    <ComboBoxItem Content="Error"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Log Retention -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Log Retention (days)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="How long to keep log files" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="LogRetentionSlider" Width="140" Minimum="1" Maximum="30" Value="7" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=LogRetentionSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="30" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Confirm on Exit -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Confirm on Exit" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Show confirmation dialog before closing" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ConfirmExitToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Remember Window Position -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Remember Window Position" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Restore window position on startup" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="RememberPositionToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Browser Settings Panel -->
                    <StackPanel x:Name="BrowserPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸŒ Browser Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Default Server -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Default Server" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Select the default Evony game server" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="DefaultServerCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="cc1.evony.com"/>
                                    <ComboBoxItem Content="cc2.evony.com" IsSelected="True"/>
                                    <ComboBoxItem Content="cc3.evony.com"/>
                                    <ComboBoxItem Content="cc4.evony.com"/>
                                    <ComboBoxItem Content="cc5.evony.com"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Cache Size -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Cache Size (MB)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Maximum browser cache size" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="CacheSizeSlider" Width="140" Minimum="100" Maximum="2000" Value="500" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=CacheSizeSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="40" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Enable Flash -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Flash Player" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Required for Evony game client" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="EnableFlashToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Enable GPU -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="GPU Acceleration" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Use GPU for rendering (recommended)" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="EnableGpuToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Zoom Level -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Default Zoom (%)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Default page zoom level" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="ZoomSlider" Width="140" Minimum="50" Maximum="200" Value="100" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=ZoomSlider, Path=Value, StringFormat={}{0:0}%}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="40" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Enable Dev Tools -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Developer Tools" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Enable browser developer tools (F12)" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="EnableDevToolsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Proxy Settings Panel -->
                    <StackPanel x:Name="ProxyPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ”Œ Proxy Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Proxy Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Proxy" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Route traffic through proxy server (Fiddler)" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ProxyEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Proxy Host -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Proxy Host" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Proxy server hostname or IP address" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <TextBox x:Name="ProxyHostText" Grid.Column="1" Style="{StaticResource ModernTextBox}" Text="127.0.0.1"/>
                            </Grid>
                        </Border>
                        
                        <!-- Proxy Port -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Proxy Port" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Proxy server port number" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <TextBox x:Name="ProxyPortText" Grid.Column="1" Style="{StaticResource ModernTextBox}" Text="8888"/>
                            </Grid>
                        </Border>
                        
                        <!-- Proxy Type -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Proxy Type" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Protocol used by the proxy server" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="ProxyTypeCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="HTTP" IsSelected="True"/>
                                    <ComboBoxItem Content="SOCKS4"/>
                                    <ComboBoxItem Content="SOCKS5"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- Test on Startup -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Test on Startup" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Verify proxy connection when application starts" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="TestProxyToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- MCP Settings Panel -->
                    <StackPanel x:Name="McpPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ¤– MCP Server Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- MCP Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable MCP Servers" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Enable Model Context Protocol integration" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="McpEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Auto Start -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Auto-Start Servers" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Automatically start MCP servers on launch" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="McpAutoStartToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- RAG Server -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="RAG Server" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Evony knowledge base and documentation" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <TextBox x:Name="RagPortText" Grid.Column="1" Style="{StaticResource ModernTextBox}" Text="3001" Margin="0,0,10,0"/>
                                <CheckBox x:Name="RagEnabledToggle" Grid.Column="2" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- RTE Server -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="RTE Server" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Real-time traffic analysis and decoding" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <TextBox x:Name="RtePortText" Grid.Column="1" Style="{StaticResource ModernTextBox}" Text="3002" Margin="0,0,10,0"/>
                                <CheckBox x:Name="RteEnabledToggle" Grid.Column="2" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Health Check Interval -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Health Check Interval (sec)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="How often to check server health" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="HealthCheckSlider" Width="140" Minimum="10" Maximum="300" Value="30" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=HealthCheckSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="30" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- LLM Settings Panel -->
                    <StackPanel x:Name="LlmPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ§  LLM Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- LLM Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable LLM Integration" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Connect to local language model for AI features" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="LlmEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Backend -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="LLM Backend" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Select the LLM provider" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <ComboBox x:Name="LlmBackendCombo" Grid.Column="1" Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="LM Studio" IsSelected="True"/>
                                    <ComboBoxItem Content="Ollama"/>
                                    <ComboBoxItem Content="OpenAI"/>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- LM Studio URL -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="250"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="LM Studio URL" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="API endpoint for LM Studio" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <TextBox x:Name="LmStudioUrlText" Grid.Column="1" Style="{StaticResource ModernTextBox}" Text="http://localhost:1234/v1"/>
                            </Grid>
                        </Border>
                        
                        <!-- Temperature -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Temperature" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Controls randomness (0=deterministic, 2=creative)" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="TemperatureSlider" Width="140" Minimum="0" Maximum="2" Value="0.7" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=TemperatureSlider, Path=Value, StringFormat={}{0:0.0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="30" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Max Tokens -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Max Tokens" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Maximum response length" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="MaxTokensSlider" Width="140" Minimum="128" Maximum="8192" Value="2048" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=MaxTokensSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="40" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Stream Response -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Stream Response" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Show response as it's generated" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="StreamResponseToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Fiddler Settings Panel -->
                    <StackPanel x:Name="FiddlerPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ” Fiddler Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Fiddler Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Fiddler Integration" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Connect to Fiddler for traffic capture" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="FiddlerEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Auto-Start Fiddler -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Auto-Start Fiddler" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Launch Fiddler automatically on startup" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="AutoStartFiddlerToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Decode AMF -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Auto-Decode AMF3" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Automatically decode AMF3 packets" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="DecodeAmfToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Max Traffic Entries -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Max Traffic Entries" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Maximum packets to keep in memory" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="MaxTrafficSlider" Width="140" Minimum="100" Maximum="10000" Value="1000" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=MaxTrafficSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="50" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Automation Settings Panel -->
                    <StackPanel x:Name="AutomationPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ¤– Automation Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- AutoPilot Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable AutoPilot" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Allow automated game actions" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="AutoPilotToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Safety Limits -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Safety Limits" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Enable rate limiting and safety checks" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="SafetyLimitsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Max Actions Per Minute -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Max Actions/Minute" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Maximum automated actions per minute" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="MaxActionsSlider" Width="140" Minimum="1" Maximum="100" Value="30" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=MaxActionsSlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="30" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Action Delay -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Action Delay (ms)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Delay between automated actions" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="ActionDelaySlider" Width="140" Minimum="50" Maximum="5000" Value="100" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=ActionDelaySlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="40" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Randomize Delay -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Randomize Delays" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Add random variance to action delays" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="RandomizeDelayToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Traffic Settings Panel -->
                    <StackPanel x:Name="TrafficPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ“Š Traffic Analysis Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Analysis Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Traffic Analysis" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Analyze captured network traffic" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="TrafficAnalysisToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Pattern Detection -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Pattern Detection" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Detect recurring patterns in traffic" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="PatternDetectionToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Auto Scroll -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Auto-Scroll Traffic" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Automatically scroll to new traffic entries" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="AutoScrollToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Chatbot Settings Panel -->
                    <StackPanel x:Name="ChatbotPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ’¬ Chatbot Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Chatbot Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Chatbot" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Show AI assistant chatbot panel" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ChatbotEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Show Timestamps -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show Timestamps" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display message timestamps" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowTimestampsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Markdown Rendering -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Markdown Rendering" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Render markdown formatting in responses" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="MarkdownToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Status Bar Settings Panel -->
                    <StackPanel x:Name="StatusBarPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ“Š Status Bar Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Status Bar Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Status Bar" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Show status bar with real-time widgets" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="StatusBarEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- RAG Progress -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show RAG Progress" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display Evony RAG processing progress" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowRagProgressToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- RTE Progress -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show RTE Progress" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display Evony RTE traffic analysis progress" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowRteProgressToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- LLM Stats -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show LLM Stats" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display tokens/sec and VRAM usage" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowLlmStatsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- GPU Temp -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show GPU Temperature" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display RTX 3090 Ti temperature" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowGpuTempToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                        
                        <!-- Packets/sec -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Show Packets/sec" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Display network packet rate" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="ShowPacketsToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}" IsChecked="True"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                    
                    <!-- Webhooks Settings Panel -->
                    <StackPanel x:Name="WebhooksPanel" Visibility="Collapsed">
                        <TextBlock Text="ðŸ”” Webhook Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Webhooks Enabled -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Enable Webhooks" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Send notifications to external services" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="WebhooksEnabledToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Discord Webhook -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Discord Webhook URL" Style="{StaticResource SettingLabel}"/>
                                <TextBlock Text="Webhook URL for Discord notifications" Style="{StaticResource SettingDescription}" Margin="0,0,0,10"/>
                                <TextBox x:Name="DiscordWebhookText" Style="{StaticResource ModernTextBox}"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Telegram -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Telegram Bot Token" Style="{StaticResource SettingLabel}"/>
                                <TextBlock Text="Bot token from @BotFather" Style="{StaticResource SettingDescription}" Margin="0,0,0,10"/>
                                <TextBox x:Name="TelegramTokenText" Style="{StaticResource ModernTextBox}" Margin="0,0,0,10"/>
                                <TextBlock Text="Telegram Chat ID" Style="{StaticResource SettingLabel}"/>
                                <TextBox x:Name="TelegramChatIdText" Style="{StaticResource ModernTextBox}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Advanced Settings Panel -->
                    <StackPanel x:Name="AdvancedPanel" Visibility="Collapsed">
                        <TextBlock Text="âš™ Advanced Settings" Style="{StaticResource SectionHeader}"/>
                        
                        <!-- Debug Mode -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Debug Mode" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Enable detailed debug logging" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="DebugModeToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Performance Mode -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Performance Mode" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Optimize for speed over features" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <CheckBox x:Name="PerformanceModeToggle" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"/>
                            </Grid>
                        </Border>
                        
                        <!-- Max Memory -->
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Max Memory (MB)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="Maximum memory usage limit" Style="{StaticResource SettingDescription}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Slider x:Name="MaxMemorySlider" Width="140" Minimum="512" Maximum="8192" Value="2048" 
                                            Style="{StaticResource ModernSlider}" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding ElementName=MaxMemorySlider, Path=Value, StringFormat={}{0:0}}" 
                                               Foreground="{StaticResource TextPrimary}" Margin="10,0,0,0" Width="40" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Danger Zone -->
                        <TextBlock Text="âš  Danger Zone" Style="{StaticResource SectionHeader}" Foreground="{StaticResource ErrorColor}" Margin="0,20,0,15"/>
                        
                        <Border Background="#2a1a1a" CornerRadius="8" Padding="15" BorderBrush="{StaticResource ErrorColor}" BorderThickness="1">
                            <StackPanel>
                                <Button Content="ðŸ”„ Reset to Defaults" Style="{StaticResource SecondaryButton}" 
                                        Click="ResetDefaults_Click" Margin="0,0,0,10" HorizontalAlignment="Left"/>
                                <Button Content="ðŸ—‘ Factory Reset" Background="{StaticResource ErrorColor}" 
                                        Foreground="White" BorderThickness="0" Padding="20,10" Cursor="Hand"
                                        Click="FactoryReset_Click" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
    </Grid>
</Window>
